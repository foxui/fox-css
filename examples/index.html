<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>listview-Demo</title>
        <link rel="stylesheet" href="../../fox-core/dist/foxui.css">
        <link rel="stylesheet" href="../dist/css/fox-css.css"/>
        <script src="../../fox-core/dist/foxui.js"></script>
        <link rel="import" href="../../fox-content/dist/fox-content.html"/>
        <link rel="import" href="../../fox-icon/dist/fox-icon.html"/>
        <link rel="import" href="../../fox-page/dist/fox-page.html"/>
        <link rel="import" href="../../fox-toolbar/dist/fox-toolbar.html"/>
        <link rel="import" href="../../fox-page-content/dist/fox-page-content.html"/>
        <link rel="import" href="../../fox-toggle/src/fox-toggle.html">
    </head>
    <body>
        <fox-page id="recommend">
            <fox-toolbar title="listview-Demo">
                <label class="left" style="color:#1284ff"><a href="#category" transition="vslide">类别</a></label>
                <div class="right">
                    <fox-icon icon="icon-list"></fox-icon>
                </div>
            </fox-toolbar>

            <fox-page-content class="fox-theme-ios">
                <ul class="fox-listview">
                    <li class="fox-listview-item" >
                        <a href="">
                            <span class="item-icon" >
                                <img class="item-icon-img" src="img/1.png" alt=""/>
                            </span>
                            <div class="item-body">
                                your item
                            </div>
                            <div class="item-tail">
                                <span class="count">3</span>
                                <span class="tip">tip</span>
                                <span class="chevron"></span>
                            </div>
                        </a>
                    </li>
                    <li class="fox-listview-item">
                        <a href="" class="swipe-left">
                            <span class="item-icon icon-pages"></span>
                            <div class="item-body">
                                swipe
                            </div>
                        </a>
                        <div class="item-menu">
                            <span>更多</span>
                            <span class="b-red">删除</span>
                        </div>
                    </li>
                </ul>
                <ul class="fox-listview">
                    <li class="fox-listview-item">
                        <a href="" class="swipe-left">
                            <div class="item-body">
                                show time
                            </div>
                        </a>
                        <div class="item-menu">
                            <span>更多</span>
                            <span class="b-red">删除</span>
                        </div>
                    </li>
                    <li class="fox-listview-item">
                        <a href="">
                            <div class="item-body">
                                短信铃声
                            </div>
                            <div class="item-tail">
                                <span class="tip">三全音</span>
                                <span class="chevron"></span>
                            </div>
                        </a>
                    </li>
                </ul>

                <ul class="fox-listview listview-inner">
                    <li class="fox-listview-item">
                        <a href="">
                            <div class="item-body">
                                 短信铃声
                            </div>
                            <div class="item-tail">
                                <span class="tip">三全音</span>
                                <span class="chevron"></span>
                            </div>
                        </a>
                    </li>
                    <li class="fox-listview-item">
                        <a href="">
                            <div class="item-body">
                                音乐一
                            </div>
                            <div class="item-tail">
                                <span class="tip">流行</span>
                            </div>
                        </a>
                    </li>
                    <li class="fox-listview-item">
                        <a href="">
                            <div class="item-body">
                                提醒
                            </div>
                            <fox-toggle active="" class="active toggle"></fox-toggle>
                        </a>
                    </li>
                </ul>
            </fox-page-content>
        </fox-page>


    </body>
    <script type="text/javascript">
        window.onload = function(){
            var foxCss = {};
            foxCss.menu_swipeLeft = function(){
                //获得class
                function getElementsByClassName(_className,_tag){
                    var classElements=[],allElements= arguments.length > 1 ? document.getElementsByTagName(_tag) : document.getElementsByTagName('*');
                    for(var i=0;i<allElements.length;i++){
                        if(allElements[i].className == _className){
                            classElements[classElements.length]=allElements[i];
                        }
                    }
                    return classElements;
                }
                /*swipe to show item-menu*/
                var swipeDoms = getElementsByClassName("swipe-left","a");
                var touchStart = function(e){
                    isdrag = true;
                    e.preventDefault();
                    var touch = e.touches[0];
                    startX = touch.pageX;
                    if(this.style.left < 0){

                    }
                };
                var touchMove = function(e){
                    if (isdrag){
                        e.preventDefault();//阻止滚动
                        var touch = e.touches[0];
                        var x = touch.pageX - startX;
                        this.style.left = x + 'px';
                        if(x <= -135){
                            tl = -135 + 'px';
                            isdrag = false;
                        }else if(x > 0){
                            isdrag = false;
                        }else {
                            isdrag = true;
                        }
                    }
                }
                var L = swipeDoms.length;
                for(var i = 0; i < L; i++){
                    swipeDoms[i].addEventListener('touchstart',touchStart);
                    swipeDoms[i].addEventListener('touchmove',touchMove);
                    swipeDoms[i].addEventListener('touchend',function(){

                    });
                }
            }

            foxCss.menu_swipeLeft();
        }
    </script>
</html>
